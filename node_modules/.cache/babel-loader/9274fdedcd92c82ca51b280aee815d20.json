{"ast":null,"code":"var _jsxFileName = \"/Users/ayelen/Documents/Web-Development/React-JS/proyecto-final/Comarca/src/Contexts/CartContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n/* eslint-disable max-len */\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext({});\nexport const useCartContext = () => {\n  _s();\n\n  return useContext(CartContext);\n};\n\n_s(useCartContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nconst CartProvider = ({\n  children\n}) => {\n  _s2();\n\n  const [cart, setCart] = useState([]);\n  const [productsInCart, setProductsInCart] = useState(0);\n\n  const clearCart = () => setCart([]);\n\n  const isInCart = id => cart.some(item => item.id === id);\n\n  const addToCart = (item, quantity) => {\n    if (isInCart(item.id)) {\n      const newCart = cart.map(cartItem => {\n        if (cartItem.id === item.id) {\n          return { ...cartItem,\n            quantity: cartItem.quantity + quantity\n          };\n        } else return cartItem;\n      });\n      setCart(newCart);\n    } else {\n      setCart(prev => [...prev, { ...item,\n        quantity\n      }]);\n    }\n  };\n\n  const removeItem = itemId => {\n    const updateCart = cart.filter(cartItem => cartItem.id !== itemId);\n    setCart(updateCart);\n  };\n\n  const realStock = item => {\n    const foundItem = cart.find(el => el.id === item.id);\n    return foundItem ? item.stock - foundItem.quantity : item.stock;\n  };\n\n  const reduceCart = cart.reduce((acc, el) => acc += el.precio * el.quantity, 0);\n  const reduceQuantity = cart.reduce((acc, el) => acc += el.quantity, 0);\n  useEffect(() => {\n    const localCart = localStorage.getItem('cart');\n    if (!localCart) localStorage.setItem('cart', JSON.stringify([]));else setCart(JSON.parse(localCart));\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cart));\n    const inCart = cart.reduce((acc, item) => {\n      return acc + item.quantity;\n    }, 0);\n    setProductsInCart(inCart);\n  }, [cart]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      productsInCart,\n      setCart,\n      clearCart,\n      addToCart,\n      reduceCart,\n      removeItem,\n      reduceQuantity,\n      realStock\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(CartProvider, \"mephMQ6H8z8JupR408GPR/kh/5M=\");\n\n_c = CartProvider;\nexport default CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"sources":["/Users/ayelen/Documents/Web-Development/React-JS/proyecto-final/Comarca/src/Contexts/CartContext.js"],"names":["React","createContext","useState","useContext","useEffect","CartContext","useCartContext","CartProvider","children","cart","setCart","productsInCart","setProductsInCart","clearCart","isInCart","id","some","item","addToCart","quantity","newCart","map","cartItem","prev","removeItem","itemId","updateCart","filter","realStock","foundItem","find","el","stock","reduceCart","reduce","acc","precio","reduceQuantity","localCart","localStorage","getItem","setItem","JSON","stringify","parse","inCart"],"mappings":"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","sourcesContent":["/* eslint-disable max-len */\nimport React, {createContext, useState, useContext, useEffect} from 'react';\n\nexport const CartContext = createContext({});\nexport const useCartContext = () => useContext(CartContext);\n\nconst CartProvider = ({children}) => {\n  const [cart, setCart] = useState([]);\n  const [productsInCart, setProductsInCart] = useState(0);\n\n  const clearCart = () => setCart([]);\n\n  const isInCart = (id) => cart.some((item) =>item.id === id);\n\n  const addToCart = (item, quantity) => {\n    if (isInCart(item.id)) {\n      const newCart = cart.map((cartItem) => {\n        if (cartItem.id === item.id) {\n          return {...cartItem, quantity: cartItem.quantity + quantity};\n        } else return cartItem;\n      });\n      setCart(newCart);\n    } else {\n      setCart((prev) => [...prev, {...item, quantity}]);\n    }\n  };\n\n  const removeItem = (itemId) => {\n    const updateCart = cart.filter((cartItem) => cartItem.id !== itemId);\n    setCart(updateCart);\n  };\n\n  const realStock = (item) => {\n    const foundItem = cart.find((el) => el.id === item.id);\n    return foundItem ? item.stock - foundItem.quantity : item.stock;\n  };\n\n  const reduceCart = cart.reduce((acc, el) => acc += (el.precio * el.quantity), 0);\n\n  const reduceQuantity = cart.reduce((acc, el) => acc += (el.quantity), 0);\n\n  useEffect(() => {\n    const localCart = localStorage.getItem('cart');\n    if (!localCart) localStorage.setItem('cart', JSON.stringify([]));\n    else setCart(JSON.parse(localCart));\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cart));\n    const inCart = cart.reduce((acc, item) => {\n      return acc + item.quantity;\n    }, 0);\n    setProductsInCart(inCart);\n  }, [cart]);\n\n  return (\n    <CartContext.Provider value={{cart, productsInCart, setCart, clearCart, addToCart, reduceCart, removeItem, reduceQuantity, realStock}} >\n      { children }\n    </CartContext.Provider>\n  );\n};\n\nexport default CartProvider;\n"]},"metadata":{},"sourceType":"module"}